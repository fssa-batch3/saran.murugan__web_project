<!DOCTYPE html>

<head lan="eng">
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Page Title</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel="stylesheet" href="../Assets/css/profilesettings.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
</head>

<body>
    <header>
        <img src="../Assets/images/logo/logo.png" alt="logo5">
    </header>



  



    <div class="main1">
        <div class="name-user">
            <i class="user-img fa-solid fa-user"></i>
            <input type="text" id="name" disabled>

            <div class="logout">
                <button onclick="deleteItem()" id="logout"> Sign out</button>
            </div>
        </div>

        <div class="email-num">
            <form>
            <div class="phone-num">
                 <h3>Phone:</h3> 
                <input type="text" id="number" pattern="[0-9]{10,10}" inputmode="numeric" minlength="10" maxlength="10" disabled>
            </div>

            <div class="email">
                    <h3>Email:</h3> <p id="email" style="color:white;" ></p>
            </div>

            <div class="whatsapp-msg">
                
                <input type="checkbox" >
                <h3>WhatsApp notification</h3>
            </div>



            </form>

        </div>
        <div class="edit">
         <button onclick="edit()" id="edit">Edit</button>
         <buttonn id="save">Save</button>
        </div>

    </div>
    <div class="setting-option">
        <ul>
          <li>Booking history</li>
          <li>Notification</li>
          <li>Help and support</li>
          <li>About us</li>
          <li>Cinemas</li>
          <li>Movies</li>
        </ul>
    </div>


    <div class="content-all">
    


    <div class="booking-history">
     
    <div class="booked-movie">
     
    </div>

    </div>
      
    </div>
    


    
   
    <script>

   let users = JSON.parse(localStorage.getItem("users"));

   const name = document.getElementById("name")
   const email = document.getElementById("email")
   const number = document.getElementById("number")
//    document.getElementById("name").value = users["name"]
//    document.getElementById("email").innerText = users["email"]
//    document.getElementById("number").value = users["number"];

  
let profile_arr = JSON.parse(localStorage.getItem("profile_details"));

let check;

users.find(userobj => {
    if (userobj["email"] == profile_arr["email"] && userobj["password"] == profile_arr["password"]) {
        name.value = userobj["name"]
        email.innerText = userobj["email"]
        number.value = userobj["number"]
        return check  = userobj;
    }
}) 

// console.log(check)
// console.log(check["name"])
// name.value=check["name"];

  function edit(){
    document.getElementById("name").disabled = false;
    document.getElementById("number").disabled = false;
  }

  document.getElementById("save").addEventListener("click", (e) => {

    check["name"] = document.getElementById("name").value;
    check["number"] = document.getElementById("number").value;

    console.log(check)

    localStorage.setItem("users", JSON.stringify(users));

    console.log(users);

  })  

  function deleteItem() {
        for (let i = 0; i < users.length; i++) {
            if (document.getElementById("email").value == users[i]["email"]) {
                users.splice(i,1)
                confirm("poda ...p*****")
                localStorage.setItem("users", JSON.stringify(users));

                window.location.href = "signup.html";
            }
        }
  }

     
     
     </script>

  
</body>

</html>